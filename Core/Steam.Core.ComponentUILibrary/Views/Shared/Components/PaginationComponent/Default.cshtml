@using ComponentUILibrary.Models

@model PaginationModel
@{
    int blockNumber = 5;
    var temp = Model.PageCount % blockNumber;
    int endBlock = (Model.PageCount / blockNumber);//4
    if (temp != 0)
    {
        endBlock = endBlock + 1;

    }
    int currentBlock = (Model.PageIndex / blockNumber);//3
    var tempCurrentBlock = Model.PageIndex % blockNumber;
    if (tempCurrentBlock != 0)
    {
        currentBlock = currentBlock + 1;
    }
    int to = currentBlock * 5;//15
    if (Model.PageIndex == to)
    {
        currentBlock = currentBlock + 1;
        to = currentBlock * 5;
    }

    to = to >= Model.PageCount ? Model.PageCount : to;
    int from = to - 5;
    from = from <= 0 ? 1 : from;
    ;



}
<ul class="pagination " style="margin-top:10px">

    <li @(Model.PageIndex ==1 ?"hidden":"") class="page-item">
        <a onclick="_action.Search(@(Model.PageIndex-1))" class="page-link cursor-pointer" aria-label="Previous">
            <span aria-hidden="true">«</span>
            <span class="sr-only">Previous</span>
        </a>
    </li>
    @if (currentBlock > endBlock)
    {
        <li class="page-item cursor-pointer"><a class="page-link" onclick="_action.Search(1)">1</a></li>
        <li class="page-item"><a class="page-link">...</a></li>

    }
    @for (int i = from; i <= to; i++)
    {
        <li class="page-item cursor-pointer @(i== Model.PageIndex?"active":"")" onclick=""><a class="page-link" onclick="_action.Search(@i)">@i</a></li>

    }
    @if (currentBlock < endBlock)
    {
        <li class="page-item"><a class="page-link" href="?page=1">...</a></li>
        <li class="page-item cursor-pointer"><a class="page-link" onclick="_action.Search(@Model.PageCount)">@Model.PageCount</a></li>

    }

    <li @(Model.PageIndex ==Model.PageCount ?"hidden":"") class="page-item">
        <a onclick="_action.Search(@(Model.PageIndex+1))" class="page-link cursor-pointer" aria-label="Next">
            <span aria-hidden="true">»</span>
            <span class="sr-only">Next</span>
        </a>
    </li>
</ul>
<script>
    var PageIndex = @Model.PageIndex


</script>
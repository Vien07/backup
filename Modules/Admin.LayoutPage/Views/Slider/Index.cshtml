
@model Admin.LayoutPage.Controllers.SliderModel
@using ComponentUILibrary.Models
@using Admin.LayoutPage.Constants
@using Steam.Core.Common
@using ComponentUILibrary.ViewComponents;

@using PartialView = Admin.LayoutPage.Constants.SliderConstants.StaticPath.PartialView ;

@using WebSiteConfig = Admin.LayoutPage.Constants.SliderConstants.Config.Website;
@{
    //Layout = "~/Views/Shared/_Layout.cshtml";
    ViewData["PageTitle"] = Model.PageTitle.ModuleName;
    //PaginationModel test = new PaginationModel();
    //test.PageIndex = 1;
    //test.PageSize = 10;
}

@*@await Component.InvokeAsync(nameof(ComponentUILibrary.ViewComponents.PageTitleComponent), new { model = Model.PageTitle })*@
<section class="section">
    <div class="row" id="table-hover-row">
        <div class="col-12">
            <div class="card">

                <div class="card-header">

                    <form id="SearchForm" class="row col-xl-12 col-sm-12 cms-filter-row">

                        <div style="padding:0" class="col-sm-3 cms-filter">
                            <a type="button" href="@Url.Content(SliderConstants.Route.PageEdit)" class="btn btn-primary ">
                                Thêm Slider
                            </a>
                        </div>
                        <!--filter action-->

                    </form>

                    @*<div class="form-group ml-auto  col-auto cms-setting">
                            <i onclick="_action.OpenSettingModal()" class="fas fa-cog "></i>
                        </div>*@
                </div>
                <div class="card-content p-lg-2 pr-2 cms-div-table ">
                    <!-- table hover -->
                    <div class="table-responsive">
                        @{
                            ComponentUILibrary.Models.TableData table = new ComponentUILibrary.Models.TableData();
                            table.ID = "TableSlider";
                            table.Class = "table table-hover bg-white mb-0 ";
                            table.Body = await Html.PartialAsync(SliderConstants.StaticPath.PartialView.Index_Table, Model.List);
                            table.ActionMove = "_action_Slider.Move";
                            List<TableHead> tableHead = new List<TableHead>();
                            tableHead.Add(new TableHead { Name = "#", Width = 50, OrderBy = "Order" });
                            tableHead.Add(new TableHead { Name = "Kiểu Slider", OrderBy = "Title" });
                            tableHead.Add(new TableHead { Name = "Active", Width = 1, Class = "text-right" });
                            tableHead.Add(new TableHead { Name = "Action", Width = 150, Class = "text-center" });

                            table.Header = tableHead;
                        }
                        @await Component.InvokeAsync(nameof(ComponentUILibrary.ViewComponents.TableComponent), new { table = table })


                        <div class="row mx-0 mt-1 align-items-center">
                            <div class="col-12 col-sm-6">


                            </div>
                            <div class=" col-12 col-sm-6  align-items-center" id="divPaging">
                                <nav style="float:right" class="pagination-wrap d-inline-block" id="navigation_paging" aria-label="navigation">
                                    @{
                                        PaginationModel pageModel = new PaginationModel();
                                        pageModel.PageIndex = 1;
                                        pageModel.PageSize = 1;
                                        pageModel.PageCount = Model.List.PageCount;
                                        pageModel.Id = "";
                                        pageModel.Class = "";
                                    }
                                    @await Component.InvokeAsync(nameof(ComponentUILibrary.ViewComponents.PaginationComponent), Model.Pagination)



                                </nav>
                            </div>
                        </div>

                    </div>

                    <!-- table hover -->

                </div>
            </div>
        </div>
    </div>
    <div class="card card-action mt-4">
        <div class="card-header">
            <div class="card-action-title">
                <a id="btnUpdateSliderHtml" onclick="" class="btn btn-secondary text-white">
                    Cập nhật Website&nbsp; <i class="bx bxl-chrome"> </i>
                </a>
                <i style="cursor:pointer" onclick="_commonAdmin.SetDeviceMode('previewIframe','mobile')" class='bx bx-mobile-alt'></i>
                <i style="cursor:pointer" onclick="_commonAdmin.SetDeviceMode('previewIframe','tablet')" class='bx bx-tab'></i>
                <i style="cursor:pointer" onclick="_commonAdmin.SetDeviceMode('previewIframe','desktop')" class='bx bx-desktop'></i>

            </div>
            <div class="card-action-element">
                <ul class="list-inline mb-0">
                    <li class="list-inline-item">
                        <a href="javascript:void(0);" class="card-expand"><i class="tf-icons bx bx-fullscreen"></i></a>
                    </li>
                </ul>
            </div>
        </div>

        <div class="card-body text-center">
            @*<iframe width="100%" height="500" id="previewIframe" src="@Model.Configs[WebSiteConfig.ApiPreviewPage]">
            </iframe>*@
        </div>
    </div>
    @*    <div id="divModalInfo">*@
    <!-- modal -->
    @*        @await Html.PartialAsync(Model._PartialUrl+Model._PartialModel,Model.ModelSlider)
    *@
    <div class="modal fade" id="ModelData_Slider" data-bs-backdrop="static" data-bs-keyboard="false" tabindex="-1" aria-labelledby="ModelDataLabel" aria-hidden="true">
        <div class="modal-dialog modal-dialog-centered modal-dialog-scrollable modal-lg">
            <div class="modal-content">
                <div class="modal-header">
                    <h5 class="modal-title" id="ModelDataLabel">Slider HTML</h5>
                    <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
                </div>
                <div class="modal-body">
                    <div class="tab-content" id="divModalInfo">
                        <textarea id="txtHtml" class="form-control" rows="50"></textarea>
                    </div>
                </div>
                @*               <div class="modal-footer">
                    <button type="button" class="btn btn-secondary" data-bs-dismiss="modal">Đóng</button>
                    <button type="button" onclick="_action.Save()" class="btn btn-primary">Lưu</button>


                    </div>*@
            </div>
        </div>
    </div>
    @*    </div>
    *@
    <!-- modal -->
    <!-- Modal config -->
    <div id="divModalConfig">
        @{
            ConfigModalModel configModel = new ConfigModalModel();
            configModel.BodyUrl = PartialView.Index_ModalConfig;
            configModel.GetConfigModel(Model.Configs);
        }
        @await ConfigModalComponent.Render(ViewContext, configModel)

    </div>

    <!-- end Modal config -->
    @Html.AntiForgeryToken()

</section>
@*<button type="button" class="btn btn-secondary" data-toggle="tooltip" data-placement="top" title="Tooltip on top">
        Tooltip on top
    </button>*@
<!-- Hoverable rows end -->
@*@section Scripts{*@
<script asp-append-version="true" src="@Url.Content(SliderConstants.ModuleInfo.PathCommand)/slider/index.js"></script>

<script>
        const ModelView_Slider = {
            RouteIndex: "@SliderConstants.Route.PageIndex",
            DivModalDataID: "divModalInfo_Slider",
            ModalDataID: "ModelData_Slider",
            DivModalConfigID: "divModalConfig_Slider",
            ModalConfigID: "ModalSliderConfig",
            TableDataID: "@table.ID",
            TbodyId: "tdBody_@table.ID",
            FromUploadID: "uploadForm_Slider",
            NavPagingID: "navigation_paging_Slider",
            FileUploadID: "Images_Slider",
            SearchFormID: "SearchForm_Slider"
        }
        let _action = new AdminSlider_Index(ModelView_Slider);
        _action.CheckFunction();
        //var dragger


        $(function () {
            $('[data-toggle="tooltip"]').tooltip();


            //InitDragDropTable()
        });




</script>
@*}*@